(this["webpackJsonpcfa-createflow-metamask"]=this["webpackJsonpcfa-createflow-metamask"]||[]).push([[0],{142:function(e,t,n){},182:function(e,t,n){},183:function(e,t){},192:function(e,t){},259:function(e,t){},260:function(e,t){},261:function(e,t){},262:function(e,t){},263:function(e,t){},264:function(e,t){},265:function(e,t){},266:function(e,t){},270:function(e,t,n){"use strict";n.r(t);var a=n(10),r=n(144),c=n.n(r),o=(n(182),n(0)),s=n(8),u=n(22),i=n(36),l=n(12),d=n(166),b=n(303),j=n(299),h=n(300),f=n(96),m=n(165),p=(n(142),n(100)),O=n(11),v=["isLoading","children"];function x(){return(x=Object(l.a)(Object(o.a)().mark((function e(t,n){var a,r,c,s,u,i,l,b;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new p.a.providers.Web3Provider(window.ethereum),r=a.getSigner(),console.log(r._address),e.next=5,window.ethereum.request({method:"eth_chainId"});case 5:return c=e.sent,e.next=8,d.a.create({chainId:Number(c),provider:a});case 8:return s=e.sent,e.next=11,s.loadSuperToken("fDAIx");case 11:return u=e.sent,i=u.address,e.prev=13,l=s.cfaV1.createFlow({receiver:t,flowRate:n,superToken:i}),console.log("Creating your stream..."),e.next=18,l.exec(r);case 18:b=e.sent,console.log(b),console.log("Congrats - you've just created a money stream!\n    View Your Stream At: https://app.superfluid.finance/dashboard/".concat(t,"\n    Network: Kovan\n    Super Token: DAIx\n    Sender: ").concat(r._address,",\n    Receiver: ").concat(t,",\n    FlowRate: ").concat(n,"\n    ")),e.next=27;break;case 23:e.prev=23,e.t0=e.catch(13),console.log("Hmmm, your transaction threw an error. Make sure that this stream does not already exist, and that you've entered a valid Ethereum address!"),console.error(e.t0);case 27:case"end":return e.stop()}}),e,null,[[13,23]])})))).apply(this,arguments)}var g=function(){var e=Object(a.useState)(""),t=Object(i.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(!1),o=Object(i.a)(c,2),l=o[0],d=o[1],g=Object(a.useState)(""),w=Object(i.a)(g,2),k=w[0],N=w[1],y=Object(a.useState)(""),S=Object(i.a)(y,2),C=S[0],I=S[1];function q(e){e.isLoading;var t=e.children,n=Object(u.a)(e,v);return Object(O.jsx)(b.a,Object(s.a)(Object(s.a)({variant:"success",className:"button"},n),{},{children:l?Object(O.jsx)(j.a,{animation:"border"}):t}))}return Object(O.jsxs)("div",{children:[Object(O.jsx)("h3",{children:"Create New Stream"}),Object(O.jsxs)(h.a,{children:[Object(O.jsx)(f.a,{className:"mb-3",children:Object(O.jsx)(m.a,{name:"recipient",value:n,onChange:function(e){r((function(){var t,n;return t=e.target.value,n=Object(i.a)(t,1),e.target.name=n[0],t}))},placeholder:"Enter recipient address"})}),Object(O.jsx)(f.a,{className:"mb-3",children:Object(O.jsx)(m.a,{name:"flowRate",value:k,onChange:function(e){N((function(){var t,n;return t=e.target.value,n=Object(i.a)(t,1),e.target.name=n[0],t}));var t=function(e){if("number"===typeof Number(e)&&!0!==isNaN(Number(e))){if("number"===typeof Number(e)){if(0===Number(e))return 0;var t=p.a.BigNumber.from(e);return 3600*p.a.utils.formatEther(t.toString())*24*30}}else alert("You can only calculate a flowRate based on a number")}(e.target.value);I(t.toString())},placeholder:"Enter a flowRate in wei/second"})}),Object(O.jsx)(q,{onClick:function(){d(!0),function(e,t){x.apply(this,arguments)}(n,k),setTimeout((function(){d(!1)}),1e3)},children:"Click to Create Your Stream"})]}),Object(O.jsxs)("div",{className:"calculation",children:[Object(O.jsx)("p",{children:"Your flow will be equal to:"}),Object(O.jsxs)("p",{children:[Object(O.jsxs)("b",{children:["$"," "!==C?C:0]})," DAIx/month"]})]})]})},w=n(301),k=function(){var e=Object(a.useState)(""),t=Object(i.a)(e,2),n=t[0],r=t[1],c=function(){var e=Object(l.a)(Object(o.a)().mark((function e(){var t,n,a;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=window,n=t.ethereum){e.next=5;break}return alert("Get MetaMask!"),e.abrupt("return");case 5:return e.next=7,n.request({method:"eth_requestAccounts"});case 7:a=e.sent,console.log("Connected",a[0]),r(a[0]),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),s=function(){var e=Object(l.a)(Object(o.a)().mark((function e(){var t,n,a,c,s,u;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=window,n=t.ethereum){e.next=6;break}return console.log("Make sure you have metamask!"),e.abrupt("return");case 6:console.log("We have the ethereum object",n);case 7:return e.next=9,n.request({method:"eth_accounts"});case 9:return a=e.sent,e.next=12,window.ethereum.request({method:"eth_chainId"});case 12:c=e.sent,s=c,console.log("chain ID:",c),console.log("global Chain Id:",s),0!==a.length?(u=a[0],console.log("Found an authorized account:",u),r(u)):console.log("No authorized account found");case 17:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){s()}),[]),Object(O.jsx)("div",{children:""===n?Object(O.jsx)("button",{id:"connectWallet",className:"button",onClick:c,children:"Connect Wallet"}):Object(O.jsx)(w.a,{className:"connectedWallet",children:"".concat(n.substring(0,4),"...").concat(n.substring(38))})})};function N(){return Object(O.jsxs)("div",{className:"App",children:[Object(O.jsx)(k,{}),Object(O.jsx)(g,{})]})}var y=document.getElementById("root");c.a.render(Object(O.jsx)(a.StrictMode,{children:Object(O.jsx)(N,{})}),y)}},[[270,1,2]]]);
//# sourceMappingURL=main.56fc3c4b.chunk.js.map