{"ast":null,"code":"import _regeneratorRuntime from \"/Users/taykim/Desktop/cs98/project-22f-zk-vote/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/Users/taykim/Desktop/cs98/project-22f-zk-vote/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _slicedToArray from \"/Users/taykim/Desktop/cs98/project-22f-zk-vote/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nvar _jsxFileName = \"/Users/taykim/Desktop/cs98/project-22f-zk-vote/src/components/ConnectWallet.js\",\n  _this = this,\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { Card } from \"react-bootstrap\";\nimport \"../css/createFlow.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport var ConnectWallet = function ConnectWallet() {\n  _s();\n  var _useState = useState(\"\"),\n    _useState2 = _slicedToArray(_useState, 2),\n    currentAccount = _useState2[0],\n    setCurrentAccount = _useState2[1];\n  var connectWallet = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n      var _window, ethereum, accounts;\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _window = window, ethereum = _window.ethereum;\n              if (ethereum) {\n                _context.next = 5;\n                break;\n              }\n              alert(\"Get MetaMask!\");\n              return _context.abrupt(\"return\");\n            case 5:\n              _context.next = 7;\n              return ethereum.request({\n                method: \"eth_requestAccounts\"\n              });\n            case 7:\n              accounts = _context.sent;\n              console.log(\"Connected\", accounts[0]);\n              setCurrentAccount(accounts[0]);\n              // let account = currentAccount;\n              // Setup listener! This is for the case where a user comes to our site\n              // and connected their wallet for the first time.\n              // setupEventListener()\n              _context.next = 15;\n              break;\n            case 12:\n              _context.prev = 12;\n              _context.t0 = _context[\"catch\"](0);\n              console.log(_context.t0);\n            case 15:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 12]]);\n    }));\n    return function connectWallet() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n  var checkIfWalletIsConnected = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n      var _window2, ethereum, accounts, chain, chainId, account;\n      return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _window2 = window, ethereum = _window2.ethereum;\n              if (ethereum) {\n                _context2.next = 6;\n                break;\n              }\n              console.log(\"Make sure you have metamask!\");\n              return _context2.abrupt(\"return\");\n            case 6:\n              console.log(\"We have the ethereum object\", ethereum);\n            case 7:\n              _context2.next = 9;\n              return ethereum.request({\n                method: \"eth_accounts\"\n              });\n            case 9:\n              accounts = _context2.sent;\n              _context2.next = 12;\n              return window.ethereum.request({\n                method: \"eth_chainId\"\n              });\n            case 12:\n              chain = _context2.sent;\n              chainId = chain;\n              console.log(\"chain ID:\", chain);\n              console.log(\"global Chain Id:\", chainId);\n              if (accounts.length !== 0) {\n                account = accounts[0];\n                console.log(\"Found an authorized account:\", account);\n                setCurrentAccount(account);\n                // Setup listener! This is for the case where a user comes to our site\n                // and ALREADY had their wallet connected + authorized.\n                // setupEventListener()\n              } else {\n                console.log(\"No authorized account found\");\n              }\n            case 17:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n    return function checkIfWalletIsConnected() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  useEffect(function () {\n    checkIfWalletIsConnected();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: currentAccount === \"\" ? /*#__PURE__*/_jsxDEV(\"button\", {\n      id: \"connectWallet\",\n      className: \"button\",\n      onClick: connectWallet,\n      children: \"Connect Wallet\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 9\n    }, _this) : /*#__PURE__*/_jsxDEV(Card, {\n      className: \"connectedWallet\",\n      children: \"\".concat(currentAccount.substring(0, 4), \"...\").concat(currentAccount.substring(38))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 9\n    }, _this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 61,\n    columnNumber: 3\n  }, _this);\n};\n_s(ConnectWallet, \"Oez+vfH4X005OLgBo/Rzy9wdCKo=\");\n_c = ConnectWallet;\nvar _c;\n$RefreshReg$(_c, \"ConnectWallet\");","map":{"version":3,"names":["React","useState","useEffect","Card","ConnectWallet","currentAccount","setCurrentAccount","connectWallet","window","ethereum","alert","request","method","accounts","console","log","checkIfWalletIsConnected","chain","chainId","length","account","substring"],"sources":["/Users/taykim/Desktop/cs98/project-22f-zk-vote/src/components/ConnectWallet.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { Card } from \"react-bootstrap\";\nimport \"../css/createFlow.css\";\n\nexport const ConnectWallet = () => {\n  const [currentAccount, setCurrentAccount] = useState(\"\");\n  const connectWallet = async () => {\n    try {\n      const { ethereum } = window;\n\n      if (!ethereum) {\n        alert(\"Get MetaMask!\");\n        return;\n      }\n      const accounts = await ethereum.request({\n        method: \"eth_requestAccounts\"\n      });\n      console.log(\"Connected\", accounts[0]);\n      setCurrentAccount(accounts[0]);\n      // let account = currentAccount;\n      // Setup listener! This is for the case where a user comes to our site\n      // and connected their wallet for the first time.\n      // setupEventListener()\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  const checkIfWalletIsConnected = async () => {\n    const { ethereum } = window;\n\n    if (!ethereum) {\n      console.log(\"Make sure you have metamask!\");\n      return;\n    } else {\n      console.log(\"We have the ethereum object\", ethereum);\n    }\n\n    const accounts = await ethereum.request({ method: \"eth_accounts\" });\n    const chain = await window.ethereum.request({ method: \"eth_chainId\" });\n    let chainId = chain;\n    console.log(\"chain ID:\", chain);\n    console.log(\"global Chain Id:\", chainId);\n    if (accounts.length !== 0) {\n      const account = accounts[0];\n      console.log(\"Found an authorized account:\", account);\n      setCurrentAccount(account);\n      // Setup listener! This is for the case where a user comes to our site\n      // and ALREADY had their wallet connected + authorized.\n      // setupEventListener()\n    } else {\n      console.log(\"No authorized account found\");\n    }\n  };\n\n  useEffect(() => {\n    checkIfWalletIsConnected();\n  }, []);\n\n  return(\n  <div>\n      {currentAccount === \"\" ? (\n        <button id=\"connectWallet\" className=\"button\" onClick={connectWallet}>\n          Connect Wallet\n        </button>\n      ) : (\n        <Card className=\"connectedWallet\">\n          {`${currentAccount.substring(0, 4)}...${currentAccount.substring(38)}`}\n        </Card>\n      )}\n  </div>\n  );\n};"],"mappings":"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"},"metadata":{},"sourceType":"module"}